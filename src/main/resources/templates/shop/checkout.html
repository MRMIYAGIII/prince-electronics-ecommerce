<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Agora</title>
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>
	<link type="text/css" rel="stylesheet" href="css/slick.css"/>
	<link type="text/css" rel="stylesheet" href="css/slick-theme.css"/>
	<link type="text/css" rel="stylesheet" href="css/nouislider.min.css"/>
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link type="text/css" rel="stylesheet" href="css/style.css"/>
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body>
<header>
	<div id="top-header">
		<div class="container">
			<ul class="header-links pull-left">
				<li><a href="https://www.google.com/maps/place/Adventist+University+of+Central+Africa,+Science+and+Technology+Centre/@-1.9554066,30.1014876,17z/data=!4m14!1m7!3m6!1s0x19dca6f907feabf7:0x207b54b64c8ffb34!2sAdventist+University+of+Central+Africa,+Science+and+Technology+Centre!8m2!3d-1.9555621!4d30.1042181!16s%2Fg%2F1w0nblzf!3m5!1s0x19dca6f907feabf7:0x207b54b64c8ffb34!8m2!3d-1.9555621!4d30.1042181!16s%2Fg%2F1w0nblzf?entry=ttu&g_ep=EgoyMDI1MDUxNS4xIKXMDSoASAFQAw%3D%3D"><i class="fa fa-map-marker"></i>KG 230 St</a></li>
				<li><a href="#"><i class="fa fa-phone"></i>+250-788-867-910</a></li>
				<li><a href="https://mail.google.com/mail/u/0/#inbox?compose=CllgCJqXxbtjVLDGvtqXXSqZmCHnMdjxLrTNPHrrRBPLvRNhHzrHZFrPfNBfqtXCjHDfJDZVpML"><i class="fa fa-envelope-o"></i>ecommerceprince567@gmail.com</a></li>

			</ul>
			<ul class="header-links pull-right">
				<li class="ml-3"><a th:href="@{/profile}"><i class="fa fa-user-o"></i> My Account</a></li>
				<li class="ml-3"><a th:href="@{/orders}"> Orders</a></li>
				<li class="ml-3"><a th:href="@{/logout}">Logout</a></li>
			</ul>
		</div>
	</div>
	<div id="header">
		<div class="container">
			<div class="row">
				<div class="col-md-3">
					<div class="header-logo">
						<a th:href="@{/}" class="logo">
							<img src="./img/logo.png" alt="">
						</a>
					</div>
				</div>
				<div class="col-md-6">
					<div class="header-search">
						<form onsubmit="search(); return false;">
							<select class="input-select">
								<option value="0">All Categories</option>
								<th:block th:each="category : ${categories}">
									<option th:value="${category.uuid}" th:text="${category.name}"></option>
								</th:block>
							</select>
							<input id="searchInput" class="input" placeholder="Search here">
							<button class="search-btn" onclick="search()">Search</button>
						</form>
					</div>
				</div>
				<div class="col-md-3 clearfix">
					<div class="header-ctn">
						<div>
							<a th:href="@{/wishlist}">
								<i class="fa fa-heart-o"></i>
								<span>Your Wishlist</span>
								<div class="qty" th:text="${wishlistCount != null ? wishlistCount : 0}">0</div>
							</a>
						</div>
						<div class="dropdown">
							<a th:href="@{/viewCart}">
								<i class="fa fa-shopping-cart"></i>
								<span>Your Cart</span>
								<div class="qty" th:text="${cartCount != null ? cartCount : 0}">0</div>
							</a>
						</div>
						<div class="menu-toggle">
							<a href="#">
								<i class="fa fa-bars"></i>
								<span>Menu</span>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</header>
<nav id="navigation">
	<div class="container">
		<div id="responsive-nav">
			<ul class="main-nav nav navbar-nav">
				<li class="active"><a href="#">Home</a></li>
				<li><a href="#">Hot Deals</a></li>
				<li><a href="#">Categories</a></li>
				<li><a href="#">Laptops</a></li>
				<li><a href="#">Smartphones</a></li>
				<li><a href="#">Cameras</a></li>
				<li><a href="#">Accessories</a></li>
			</ul>
		</div>
	</div>
</nav>
<div id="breadcrumb" class="section">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<h3 class="breadcrumb-header">Cart</h3>
				<ul class="breadcrumb-tree">
					<li><a href="#">Home</a></li>
					<li class="active">View cart</li>
				</ul>
			</div>
		</div>
	</div>
</div>
<div th:if="${!cartEmpty}">
	<div class="container mt-4">
		<div class="row">
			<div class="col-md-8">
				<form method="post" th:action="@{/cart/update}" class="table-form">
					<table class="table table-bordered">
						<thead>
						<tr>
							<th>Product</th>
							<th>Quantity</th>
							<th>Price</th>
						</tr>
						</thead>
						<tbody>
						<th:block th:each="cartItem : ${cartItems}">
							<tr>
								<td th:text="${cartItem.productId.name}"></td>
								<td>
									<div class="input-number">
										<input type="number" name="qty" min="0" max="5" th:value="${cartItem.quantity}" required>
										<span class="qty-up">+</span>
										<span class="qty-down">-</span>
										<input type="hidden" name="cartItemId" th:value="${cartItem.uuid.toString()}">
									</div>
								</td>
								<td th:text="${cartItem.productId.price}"></td>
							</tr>
						</th:block>
						</tbody>
					</table>
					<button type="submit" class="btn btn-warning">Update</button>
				</form>
				<br>
				<form method="post" th:action="@{/cart/apply-coupon}">
					<input type="text" name="couponCode" placeholder="Enter Coupon Code" required>
					<input type="hidden" name="cartTotal" th:value="${cartTotal}">
					<button type="submit" class="btn btn-dark">Apply</button>
				</form>
				<br>
				<h3>Total: RW<span th:text="${cartTotal}"></span></h3>
				<form method="post" th:action="@{/checkout}" class="my-4">
					<input type="hidden" name="addressUUID" th:value="${address.uuid}" />
					<input type="hidden" name="coupon" th:value="${couponCode}" />
					<input type="hidden" name="offPrice" th:value="${offPrice}" />
					<h4 class="mb-3">Choose Payment Method</h4>
					<select id="paymentMethod" name="paymentMethod" class="form-control mb-3">
						<option value="COD">Cash On Delivery</option>
						<option value="Online">Pay Online</option>
					</select>
					<button type="submit" class="btn btn-success">Place Order</button>
				</form>
			</div>
			<div class="col-md-4">
				<div id="addressSelector" class="border p-3">
					<h4 class="mb-3">Shipping Address:</h4>
					<p th:text="${address.flat} + ', ' + ${address.area} + ', ' + ${address.town} + ', ' + ${address.city} + ', ' + ${address.state} + ', ' + ${address.pin}" class="mb-0"></p>
					<p class="mt-2 mb-0"><b>Landmark: </b><span th:text="${address.landmark}"></span></p>
				</div>
				<div class="mt-4">
					<h4 class="font-weight-bold">Saved Addresses:</h4>
					<div class="row mt-2">
						<div th:each="address, rowIndex : ${addressList}" class="col-md-6">
							<div class="card mb-3">
								<div class="card-body">
									<div class="d-flex align-items-center justify-content-between">
										<a th:href="@{/changeAddress/{id}(id=${address.uuid})}" class="text-decoration-none">
											<h6 class="card-title">Address: <span th:text="${rowIndex.count}"></span></h6>
										</a>
									</div>
									<p class="card-text mb-0">
										Flat: <span th:text="${address.flat}"></span><br>
										Area: <span th:text="${address.area}"></span><br>
										Town: <span th:text="${address.town}"></span><br>
										City: <span th:text="${address.city}"></span><br>
										State: <span th:text="${address.state}"></span><br>
										PIN: <span th:text="${address.pin}"></span><br>
										Landmark: <span th:text="${address.landmark}"></span>
									</p>
									<span th:if="${address.defaultAddress}" class="badge badge-success">Default</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div th:if="${cartEmpty}">
	<div th:if="${orderFailed}" class="d-flex justify-content-center">
		<h4 class="text-danger mtext-109 cl2 p-b-30 mt-5">Order Failed due to payment error!</h4>
	</div>
	<div class="d-flex justify-content-center">
		<h3 class="mtext-109 cl2 p-b-30 mt-5 text-center">Cart is empty !!!</h3>
	</div>
	<div class="d-flex justify-content-center">
		<lottie-player src="https://assets2.lottiefiles.com/packages/lf20_qh5z2fdq.json" background="transparent" speed="1" style="width: 300px; height: 300px;" loop autoplay></lottie-player>
	</div>
</div>
<div id="newsletter" class="section">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="newsletter">
					<p>Sign Up for the <strong>NEWSLETTER</strong></p>
					<form>
						<input class="input" type="email" placeholder="Enter Your Email">
						<button class="newsletter-btn"><i class="fa fa-envelope"></i> Subscribe</button>
					</form>
					<ul class="newsletter-follow">
						<li><a href="#"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#"><i class="fa fa-twitter"></i></a></li>
						<li><a href="#"><i class="fa fa-instagram"></i></a></li>
						<li><a href="#"><i class="fa fa-pinterest"></i></a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
<footer id="footer">
	<div class="section">
		<div class="container">
			<div class="row">
				<div class="col-md-3 col-xs-6">
					<div class="footer">
						<h3 class="footer-title">About Us</h3>
						<p>we are passionate about making technology accessible to everyone. From high-performance laptops and smartphones to essential accessories and professional cameras, we offer quality products at competitive prices. Our mission is to deliver a seamless online shopping experience backed by secure payments, fast delivery, and excellent customer service.</p>
						<ul class="footer-links">
							<li><a href="https://www.google.com/maps/place/Adventist+University+of+Central+Africa,+Science+and+Technology+Centre/@-1.9554066,30.1014876,17z/data=!4m14!1m7!3m6!1s0x19dca6f907feabf7:0x207b54b64c8ffb34!2sAdventist+University+of+Central+Africa,+Science+and+Technology+Centre!8m2!3d-1.9555621!4d30.1042181!16s%2Fg%2F1w0nblzf!3m5!1s0x19dca6f907feabf7:0x207b54b64c8ffb34!8m2!3d-1.9555621!4d30.1042181!16s%2Fg%2F1w0nblzf?entry=ttu&g_ep=EgoyMDI1MDUxNS4xIKXMDSoASAFQAw%3D%3D"><i class="fa fa-map-marker"></i>KG 230 St</a></li>
							<li><a href="#"><i class="fa fa-phone"></i>+250-788-867-910</a></li>
							<li><a href="https://mail.google.com/mail/u/0/#inbox?compose=CllgCJqXxbtjVLDGvtqXXSqZmCHnMdjxLrTNPHrrRBPLvRNhHzrHZFrPfNBfqtXCjHDfJDZVpML"><i class="fa fa-envelope-o"></i>ecommerceprince567@gmail.com</a></li>

						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="bottom-footer" class="section">
		<div class="container">
			<div class="row">
				<div class="col-md-12 text-center">
					<ul class="footer-payments">
						<li><a href="#"><i class="fa fa-cc-visa"></i></a></li>
						<li><a href="#"><i class="fa fa-credit-card"></i></a></li>
						<li><a href="#"><i class="fa fa-cc-paypal"></i></a></li>
						<li><a href="#"><i class="fa fa-cc-mastercard"></i></a></li>
						<li><a href="#"><i class="fa fa-cc-discover"></i></a></li>
						<li><a href="#"><i class="fa fa-cc-amex"></i></a></li>
					</ul>
					<span class="copyright">Copyright ©<script>document.write(new Date().getFullYear());</script> All rights reserved</span>
				</div>
			</div>
		</div>
	</div>
</footer>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/nouislider.min.js"></script>
<script src="js/jquery.zoom.min.js"></script>
<script src="js/main.js"></script>
</body>
</html>